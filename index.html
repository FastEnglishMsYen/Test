<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Sentence Puzzle</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Poppins', sans-serif;
            overflow-x: hidden;
            transition: background 0.5s ease; /* Thêm hiệu ứng chuyển nền */
        }

        .screen {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            will-change: opacity, transform;
        }
        .screen.hidden {
            opacity: 0;
            transform: scale(0.95);
            pointer-events: none; /* Ngăn tương tác khi ẩn */
            position: absolute; /* Giữ không gian khi ẩn */
        }

        .card {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px); /* Hiệu ứng kính mờ */
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 2rem; /* Responsive padding */
        }

        .input-field {
            border: 2px solid #A78BFA; /* Màu tím nhạt hơn */
            border-radius: 8px;
            padding: 0.75rem 1rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .input-field:focus {
            outline: none;
            border-color: #026178; /* Màu tím đậm hơn */
            box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.3);
        }

        .btn {
            border-radius: 8px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-transform: uppercase; /* Chữ hoa cho nút */
            letter-spacing: 0.5px; /* Giãn cách chữ */
        }
        .btn-primary {
            background-color: #026178; /* Màu tím chính */
            color: white;
        }
        .btn-primary:hover {
            background-color: #022E39; /* Tím đậm hơn khi hover */
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .btn-primary:active {
            transform: translateY(0px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .btn-primary:disabled {
            background-color: #A78BFA;
            opacity: 0.7;
            cursor: not-allowed;
            transform: translateY(0);
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .btn-secondary {
            background-color: #3B82F6; /* Màu xanh */
            color: white;
        }
        .btn-secondary:hover {
            background-color: #2563EB;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .btn-success {
            background-color: #10B981; /* Màu xanh lá */
            color: white;
        }
        .btn-success:hover {
            background-color: #059669;
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }


        .word-box {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Hiệu ứng nảy hơn */
            cursor: pointer;
            background-color: #55BECC; /* Màu tím rất nhạt */
            color: #5B21B6; /* Màu tím đậm cho chữ */
            border-radius: 8px;
            padding: 0.5rem 1rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            font-weight: 600;
        }
        .word-box:hover {
            transform: scale(1.1) rotate(2deg); /* Thêm hiệu ứng xoay nhẹ */
            background-color: #E9D5FF; /* Sáng hơn khi hover */
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        #userSentence .word-box { /* Kiểu riêng cho từ trong câu */
            background-color: #C4B5FD; /* Nền khác biệt */
        }

        .correct-answer-area {
            background-color: rgba(74, 222, 128, 0.1); /* Nền xanh lá nhạt */
            border: 2px solid #22C55E; /* Viền xanh lá */
            animation: pulseCorrect 1s ease-in-out;
        }
        .wrong-answer-area {
            background-color: rgba(239, 68, 68, 0.1); /* Nền đỏ nhạt */
            border: 2px solid #EF4444; /* Viền đỏ */
            animation: shakeHorizontal 0.5s cubic-bezier(.36,.07,.19,.97) both;
        }

        @keyframes pulseCorrect {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            70% { transform: scale(1.02); box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); }
        }

        @keyframes shakeHorizontal {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-6px); }
            20%, 40%, 60%, 80% { transform: translateX(6px); }
        }
        
        /* Spinner mới */
        .spinner {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: inline-block;
            border-top: 3px solid #fff; /* Màu trắng cho spinner trên nút màu */
            border-right: 3px solid transparent;
            animation: spin 0.8s linear infinite;
        }
        #startLoading .spinner { /* Spinner trên nút start màu khác nếu cần */
             border-top: 3px solid #026178;
        }


        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Progress Bar */
        #progressBar {
            background: linear-gradient(90deg, #026178, #A78BFA); /* Gradient cho progress */
            transition: width 0.5s ease-in-out;
            box-shadow: 0 2px 4px rgba(139, 92, 246, 0.3);
        }

        /* Hint style */
        #hint {
            background-color: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #3B82F6;
            transition: all 0.3s ease-in-out;
            max-height: 0;
            overflow: hidden;
            opacity: 0;
        }
        #hint.visible {
            padding: 0.75rem;
            margin-bottom: 1rem;
            max-height: 100px; /* Hoặc giá trị đủ lớn */
            opacity: 1;
        }

    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">
    <div id="startScreen" class="screen card w-full max-w-md text-center">
        <h1 class="text-4xl font-bold text-blue-700 mb-6">Sentence Puzzle</h1>
        <p class="text-lg text-gray-700 mb-6">Ready to test your English? <br>Enter your name!</br></p>
        <input id="playerName" type="text" placeholder="Your Name" class="input-field w-full mb-6">
        <div class="relative">
            <button id="startButton" onclick="startGame()" class="btn btn-primary w-full">
                <span class="button-text">Let's Go!</span>
                <div id="startLoading" class="hidden absolute inset-0 flex items-center justify-center bg-blue-600 bg-opacity-50 rounded-lg">
                    <div class="spinner border-top-white"></div>
                </div>
            </button>
        </div>
	<h3 class="text-sm font-bold text-blue-700 mt-5">Fast English Ms.Yến</h3>
    </div>

    <div id="gameScreen" class="screen hidden card w-full max-w-3xl">
        <div class="flex justify-between items-center mb-4">
            <h2 class="text-3xl font-bold text-blue-700">Let's Finish Sentences!</h2>
            <p id="progress" class="text-lg text-gray-600 font-semibold"></p>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-5 mb-6 shadow-inner">
            <div id="progressBar" class="h-5 rounded-full" style="width: 0%"></div>
        </div>
        
        <div class="flex justify-between items-center mb-4">
            <button id="hintButton" onclick="toggleHint()" class="btn btn-secondary px-5 py-2 text-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline-block mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                </svg>
                Hint
            </button>
            <span id="timer" class="text-lg text-blue-700 font-semibold">Time: 0s</span>
        </div>
        <p id="hint" class="text-md text-blue-700 italic"></p>
        
        <div id="scrambledWords" class="flex flex-wrap gap-3 mb-6 p-4 bg-blue-50 rounded-lg min-h-[60px] justify-center">
            </div>
        <div id="userSentenceContainer" class="border-2 border-dashed border-blue-300 rounded-lg p-4 min-h-[70px] mb-6 flex flex-wrap gap-3 items-center justify-center">
            <span class="placeholder-text text-gray-400 italic">Drag words here or click to add</span>
        </div>
        
        <div class="flex justify-center items-center gap-4">
            <button id="checkButton" onclick="checkSentence()" class="btn btn-primary">Check Sentence</button>
            <div class="relative">
                <button id="nextButton" onclick="nextQuestion()" class="btn btn-success hidden">
                    <span class="button-text">Next Question</span>
                    <div id="nextLoading" class="hidden absolute inset-0 flex items-center justify-center bg-green-600 bg-opacity-50 rounded-lg">
                        <div class="spinner border-top-white"></div>
                    </div>
                </button>
            </div>
        </div>
    </div>

    <div id="endScreen" class="screen hidden card w-full max-w-md text-center">
        <h2 class="text-4xl font-bold text-blue-700 mb-4">Awesome!</h2>
        <img src="https://img.icons8.com/color/100/000000/trophy.png" alt="Trophy" class="mx-auto mb-4"/>
        <p id="playerNameDisplay" class="text-2xl text-gray-800 font-semibold mb-2"></p>
        <p id="completionTime" class="text-xl text-gray-700 mb-6"></p>
        <p class="text-lg text-gray-600 mb-8">You've mastered all the puzzles!</p>
        <button onclick="restartGame()" class="btn btn-primary w-full">Play Again</button>
    </div>

    <script>
        let questions = [];
        let currentQuestion = 0;
        let userSentenceWords = []; // Đổi tên từ userSentence để rõ ràng hơn là mảng các từ
        let startTime;
        let gameTimerInterval;
        let playerName = '';
        const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbw_N5KynzYf6jj5sgRaTqLi0NU_GVa_QVQ-vI3_grOUDo0bUvqET6W4iPWInQ5TSmpx/exec'; // YOUR WEB APP URL

        const startScreen = document.getElementById('startScreen');
        const gameScreen = document.getElementById('gameScreen');
        const endScreen = document.getElementById('endScreen');
        const playerNameInput = document.getElementById('playerName');
        const startButton = document.getElementById('startButton');
        const startLoading = document.getElementById('startLoading');
        const nextButton = document.getElementById('nextButton');
        const nextLoading = document.getElementById('nextLoading');
        const checkButton = document.getElementById('checkButton');
        const scrambledWordsContainer = document.getElementById('scrambledWords');
        const userSentenceContainer = document.getElementById('userSentenceContainer');
        const progressBar = document.getElementById('progressBar');
        const progressText = document.getElementById('progress');
        const hintElement = document.getElementById('hint');
        const hintButton = document.getElementById('hintButton');
        const timerDisplay = document.getElementById('timer');
        const placeholderText = userSentenceContainer.querySelector('.placeholder-text');

        function switchScreen(current, next) {
            current.classList.add('hidden');
            // Delayนิดหน่อยเพื่อให้ hiệu ứng ẩn hoàn tất trước khi hiện màn hình mới
            setTimeout(() => {
                next.classList.remove('hidden');
                next.style.position = 'relative'; // Reset position
                current.style.position = 'absolute'; // Đảm bảo màn hình cũ không chiếm không gian
            }, 50); // Thời gian này nên nhỏ hơn transition duration một chút
        }


        function showButtonLoading(button, loadingIndicator, show, buttonTextContent = null) {
            const textSpan = button.querySelector('.button-text');
            if (show) {
                if(textSpan) textSpan.style.opacity = '0';
                else button.style.color = 'transparent'; // Nếu không có span, ẩn text gốc
                loadingIndicator.classList.remove('hidden');
                button.disabled = true;
            } else {
                if(textSpan) textSpan.style.opacity = '1';
                else button.style.color = ''; // Hiện lại text gốc
                loadingIndicator.classList.add('hidden');
                button.disabled = false;
            }
        }

        async function fetchQuestions() {
            showButtonLoading(startButton, startLoading, true);
            try {
                const response = await fetch(WEB_APP_URL);
                if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);
                const data = await response.json();
                if (!Array.isArray(data) || data.length === 0) {
                    throw new Error('No questions received or data is not an array.');
                }
                questions = data.map(q => {
                    if (!q.sentence || typeof q.sentence !== 'string' || !q.hint) {
                        console.warn('Invalid question format, skipping:', q);
                        return null; // Bỏ qua câu hỏi không hợp lệ
                    }
                    // Loại bỏ các dấu câu cơ bản trước khi tách từ, sau đó thêm lại nếu cần khi so sánh
                    const cleanSentence = q.sentence.replace(/[.,!?]$/, '');
                    return {
                        ...q,
                        words: cleanSentence.split(' ').sort(() => Math.random() - 0.5),
                        originalSentence: q.sentence // Giữ lại câu gốc để so sánh
                    };
                }).filter(q => q !== null); // Loại bỏ các câu hỏi null

                if (questions.length === 0) {
                     throw new Error('All questions were in an invalid format.');
                }

            } catch (error) {
                console.error('Error fetching questions:', error);
                alert(`Failed to load questions: ${error.message}. Please check the connection or contact the administrator.`);
                showButtonLoading(startButton, startLoading, false);
                throw error; // Ném lỗi ra ngoài để startGame không tiếp tục
            } finally {
                 // Loading sẽ được tắt trong startGame hoặc nếu có lỗi
            }
        }

        async function startGame() {
            playerName = playerNameInput.value.trim();
            if (!playerName) {
                alert('Please enter your name!');
                playerNameInput.focus();
                return;
            }
            
            try {
                await fetchQuestions(); // fetchQuestions đã có showLoading riêng
                switchScreen(startScreen, gameScreen);
                startTime = new Date();
                startTimer();
                currentQuestion = 0;
                loadQuestion();
            } catch (error) {
                // Lỗi đã được xử lý trong fetchQuestions, không cần làm gì thêm ở đây
                // Đảm bảo nút start được kích hoạt lại nếu fetch lỗi
                showButtonLoading(startButton, startLoading, false);
                return;
            }
             showButtonLoading(startButton, startLoading, false); // Tắt loading khi thành công
        }
        
        function startTimer() {
            clearInterval(gameTimerInterval); // Xóa interval cũ nếu có
            let seconds = 0;
            timerDisplay.textContent = `Time: ${seconds}s`;
            gameTimerInterval = setInterval(() => {
                seconds++;
                timerDisplay.textContent = `Time: ${seconds}s`;
            }, 1000);
        }

        function stopTimer() {
            clearInterval(gameTimerInterval);
        }


        function toggleHint() {
            hintElement.classList.toggle('visible');
            if (hintElement.classList.contains('visible')) {
                hintElement.textContent = `Hint: ${questions[currentQuestion].hint}`;
            }
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) return; // Should not happen if logic is correct

            const q = questions[currentQuestion];
            progressText.textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            progressBar.style.width = `${((currentQuestion + 1) / questions.length) * 100}%`;
            
            hintElement.classList.remove('visible');
            scrambledWordsContainer.innerHTML = '';
            userSentenceContainer.innerHTML = ''; // Xóa các từ cũ
            placeholderText.classList.remove('hidden'); // Hiện lại placeholder
            userSentenceWords = [];

            q.words.forEach((word, index) => {
                const div = createWordDiv(word, index, true);
                scrambledWordsContainer.appendChild(div);
            });

            checkButton.classList.remove('hidden');
            nextButton.classList.add('hidden');
            userSentenceContainer.className = 'border-2 border-dashed border-blue-300 rounded-lg p-4 min-h-[70px] mb-6 flex flex-wrap gap-3 items-center justify-center';
            showButtonLoading(nextButton, nextLoading, false); // Reset next button loading
        }

        function createWordDiv(word, originalIndex, isScrambled) {
            const div = document.createElement('div');
            div.textContent = word;
            div.className = 'word-box';
            div.dataset.word = word;
            div.dataset.originalIndex = originalIndex; // Lưu vị trí gốc để trả về đúng chỗ nếu cần thiết
            div.onclick = () => handleWordClick(word, div, isScrambled);
            // Thêm thuộc tính draggable cho hiệu ứng kéo thả (sẽ cần thêm logic JS cho drop)
            div.draggable = true;
            div.ondragstart = (event) => {
                event.dataTransfer.setData("text/plain", word);
                event.dataTransfer.setData("sourceElementId", div.id || `word-${Date.now()}`); // Gán ID tạm nếu chưa có
                if(!div.id) div.id = `word-${Date.now()}`;
                event.dataTransfer.effectAllowed = "move";
            };
            return div;
        }
        
        // Kích hoạt vùng thả
        userSentenceContainer.ondragover = (event) => {
            event.preventDefault(); // Quan trọng: cho phép thả
            userSentenceContainer.classList.add('bg-blue-100'); // Hiệu ứng khi kéo qua
        };
        userSentenceContainer.ondragleave = (event) => {
             userSentenceContainer.classList.remove('bg-blue-100');
        };

        userSentenceContainer.ondrop = (event) => {
            event.preventDefault();
            userSentenceContainer.classList.remove('bg-blue-100');
            const word = event.dataTransfer.getData("text/plain");
            const sourceElementId = event.dataTransfer.getData("sourceElementId");
            const wordElement = document.getElementById(sourceElementId);
            
            if (wordElement && wordElement.parentElement === scrambledWordsContainer) {
                moveWordToSentence(word, wordElement);
            }
        };
        
        scrambledWordsContainer.ondragover = (event) => {
            event.preventDefault();
            scrambledWordsContainer.classList.add('bg-yellow-50');
        };
        scrambledWordsContainer.ondragleave = (event) => {
            scrambledWordsContainer.classList.remove('bg-yellow-50');
        };
        scrambledWordsContainer.ondrop = (event) => {
            event.preventDefault();
            scrambledWordsContainer.classList.remove('bg-yellow-50');
            const word = event.dataTransfer.getData("text/plain");
            const sourceElementId = event.dataTransfer.getData("sourceElementId");
            const wordElement = document.getElementById(sourceElementId);

            if (wordElement && wordElement.parentElement === userSentenceContainer) {
                moveWordToScrambled(word, wordElement);
            }
        };


        function handleWordClick(word, element, isCurrentlyScrambled) {
            if (isCurrentlyScrambled) {
                 moveWordToSentence(word, element);
            } else {
                moveWordToScrambled(word, element);
            }
        }
        
        function moveWordToSentence(word, element){
            userSentenceWords.push(word);
            userSentenceContainer.appendChild(element);
            element.onclick = () => handleWordClick(word, element, false); // Cập nhật trạng thái
            if(placeholderText && !placeholderText.classList.contains('hidden')) {
                placeholderText.classList.add('hidden');
            }
        }

        function moveWordToScrambled(word, element){
            const index = userSentenceWords.indexOf(word);
            if (index > -1) userSentenceWords.splice(index, 1);
            
            // Sắp xếp lại scrambledWordsContainer để từ được trả về đúng vị trí hoặc cuối cùng
            // Cách đơn giản là thêm vào cuối
            scrambledWordsContainer.appendChild(element);
            element.onclick = () => handleWordClick(word, element, true); // Cập nhật trạng thái
             if (userSentenceWords.length === 0 && placeholderText) {
                placeholderText.classList.remove('hidden');
            }
        }


        function checkSentence() {
            const q = questions[currentQuestion];
            const constructedSentence = userSentenceWords.join(' ');
            // So sánh không phân biệt chữ hoa/thường và bỏ qua dấu câu ở cuối
            const isCorrect = constructedSentence.toLowerCase().trim() === q.originalSentence.replace(/[.,!?]$/, '').toLowerCase().trim();

            userSentenceContainer.className = `border-2 rounded-lg p-4 min-h-[70px] mb-6 flex flex-wrap gap-3 items-center justify-center ${isCorrect ? 'correct-answer-area' : 'wrong-answer-area'}`;
            
            if (isCorrect) {
                fireConfetti();
                checkButton.classList.add('hidden');
                nextButton.classList.remove('hidden');
                 // Vô hiệu hóa các word-box sau khi trả lời đúng
                Array.from(scrambledWordsContainer.children).forEach(child => child.onclick = null);
                Array.from(userSentenceContainer.children).forEach(child => child.onclick = null);

            } else {
                 // Có thể thêm âm thanh sai ở đây
            }
        }
        
        function fireConfetti() {
            var end = Date.now() + (3 * 1000); // Chạy trong 3 giây
            var colors = ['#026178', '#EC4899', '#F59E0B', '#10B981'];

            function frame() {
                confetti({
                    particleCount: 4,
                    angle: 60,
                    spread: 55,
                    origin: { x: 0 },
                    colors: colors
                });
                confetti({
                    particleCount: 4,
                    angle: 120,
                    spread: 55,
                    origin: { x: 1 },
                    colors: colors
                });

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }
            frame(); // Bắt đầu bắn pháo hoa
        }


        async function nextQuestion() {
            currentQuestion++;
            if (currentQuestion < questions.length) {
                showButtonLoading(nextButton, nextLoading, true); // Hiện loading khi chuẩn bị câu mới
                // Thêm một chút delay để người dùng thấy hiệu ứng loading
                setTimeout(() => {
                    loadQuestion();
                    // Loading sẽ được tắt trong loadQuestion() hoặc ở đây nếu loadQuestion không có
                     showButtonLoading(nextButton, nextLoading, false);
                }, 300); 
            } else {
                stopTimer();
                const timeTaken = Math.round((new Date() - startTime) / 1000);
                showButtonLoading(nextButton, nextLoading, true, "Finishing...");
                
                try {
                    // Gửi dữ liệu không cần chờ phản hồi hoàn chỉnh với no-cors
                    // Tuy nhiên, để biết chắc chắn đã gửi, bạn nên dùng một Web App có trả về JSON hợp lệ
                     await fetch(WEB_APP_URL, {
                        method: 'POST',
                        mode: 'no-cors', //  'no-cors' sẽ không cho bạn biết request thành công hay không từ client side
                        headers: { 
                            // 'Content-Type': 'application/json' // Bỏ đi nếu dùng 'no-cors' và Google Script không xử lý preflight
                        },
                        body: JSON.stringify({ name: playerName, time: timeTaken }) // Dữ liệu sẽ được gửi dưới dạng chuỗi
                    });
                     // Do 'no-cors', chúng ta không thể check response.status ở đây.
                     // Giả sử nó thành công để tiếp tục flow.
                    console.log('Results submitted (no-cors mode).');
                } catch (error) {
                    console.error('Error posting results (this error might not show with no-cors):', error.message);
                    // Với no-cors, lỗi mạng thực sự mới throw ở đây. Lỗi server (4xx, 5xx) sẽ không throw.
                    alert(`Failed to save your results due to a network error. Your time was ${timeTaken} seconds.`);
                } finally {
                    showButtonLoading(nextButton, nextLoading, false);
                    endGame(timeTaken);
                }
            }
        }

        function endGame(timeTaken) {
            document.getElementById('playerNameDisplay').textContent = `Well done, ${playerName}!`;
            document.getElementById('completionTime').textContent = `You finished in ${timeTaken} seconds!`;
            switchScreen(gameScreen, endScreen);
            fireConfetti(); // Bắn pháo hoa mừng chiến thắng
        }

        function restartGame() {
            switchScreen(endScreen, startScreen);
            currentQuestion = 0;
            // questions = []; // Không cần reset questions nếu muốn dùng lại bộ câu hỏi cũ cho lần chơi tiếp theo nhanh hơn
            playerNameInput.value = ''; // Xóa tên người chơi cũ
            // Các reset khác nếu cần
            progressBar.style.width = '0%';
            progressText.textContent = '';
            timerDisplay.textContent = 'Time: 0s';
            if (placeholderText) placeholderText.classList.remove('hidden');
        }
        
        // Khởi tạo khi tải trang (có thể không cần fetch ngay nếu muốn đợi người dùng bấm Start)
        // window.onload = async () => {
        //     // Có thể preload câu hỏi ở đây nếu muốn
        //     // try {
        //     // await fetchQuestions(); // Tuy nhiên, làm vậy sẽ gọi API ngay cả khi người dùng chưa muốn chơi
        //     // } catch (error) {
        //     // Lỗi đã được xử lý trong fetchQuestions
        //     // }
        // };
    </script>
</body>
</html>
